{"ast":null,"code":"var _jsxFileName = \"/home/augusto/Escritorio/KRONOS-FRONTEND/Front/react_kronos/src/components/calendario/CalendarioDirectivo.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useCallback, useMemo, useEffect } from 'react';\nimport { Row, Col, Dropdown, Menu, Avatar, Tooltip, Button } from 'antd';\nimport { UserOutlined, FilterOutlined } from '@ant-design/icons';\nimport './Calendario.scss';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst days = ['Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes'];\nexport default function Calendario({\n  tempSelectedKeys,\n  setTempSelectedKeys,\n  materias,\n  mibooleano,\n  setMaterias,\n  setTeacher,\n  CursosMostrar\n}) {\n  _s();\n  console.log(\"CursosMostrar\", CursosMostrar);\n  const [selectedItems, setSelectedItems] = useState({});\n  const [coursesDinamic, setCoursesDinamic] = useState([]);\n  const [modulesData, setModulesData] = useState([]);\n  const [mostrarAceptar, setMostrarAceptar] = useState(false);\n  const [incomplete, setIncomplete] = useState([]);\n  const [menu, setMenu] = useState(null); // Estado para guardar el menú\n\n  // Función para crear el menú dinámicamente al hacer clic\n  const handleDropdownClick = (moduleId, courseId, key, matchingMateria) => {\n    setMenu(null); // Resetea el menú\n    const url = new URL('http://localhost:8000/api/subjectpermodule/');\n    const params = {\n      module_id: moduleId,\n      course_id: courseId\n    };\n    Object.keys(params).forEach(paramKey => url.searchParams.append(paramKey, params[paramKey]));\n    fetch(url, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Token ${localStorage.getItem('token')}`,\n        'School-ID': sessionStorage.getItem('actual_school')\n      }\n    }).then(response => response.json()).then(data => {\n      if (matchingMateria && data) {\n        data = data.filter(subject => subject.id !== matchingMateria.subject_id);\n      }\n      if (data && Array.isArray(data) && data.length > 0) {\n        const generatedMenu = /*#__PURE__*/_jsxDEV(Menu, {\n          onClick: e => handleMenuClick(moduleId, courseId, e),\n          children: [matchingMateria && /*#__PURE__*/_jsxDEV(Menu.Item, {\n            value: \"null\",\n            style: {\n              color: 'red'\n            },\n            children: \"Eliminar\"\n          }, \"null\", false, {\n            fileName: _jsxFileName,\n            lineNumber: 44,\n            columnNumber: 29\n          }, this), data.map(subject => /*#__PURE__*/_jsxDEV(Menu.Item, {\n            value: subject.id,\n            children: subject.name\n          }, subject.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 29\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 21\n        }, this);\n        setMenu(generatedMenu);\n      } else {\n        setMenu( /*#__PURE__*/_jsxDEV(Menu, {\n          onClick: e => handleMenuClick(moduleId, courseId, e),\n          children: [matchingMateria && /*#__PURE__*/_jsxDEV(Menu.Item, {\n            value: \"null\",\n            style: {\n              color: 'red'\n            },\n            children: \"Eliminar\"\n          }, \"null\", false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n            disabled: true,\n            children: \"No hay materias disponibles\"\n          }, \"no-data\", false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 21\n        }, this));\n      }\n    }).catch(error => {\n      setMenu( /*#__PURE__*/_jsxDEV(Menu, {\n        children: /*#__PURE__*/_jsxDEV(Menu.Item, {\n          disabled: true,\n          children: \"Error al traer las materias\"\n        }, \"error\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this));\n    });\n  };\n  const handleMenuClick = useCallback((moduleId, courseId, e) => {\n    const selectedSubjectId = e.key;\n    console.log(selectedSubjectId);\n    if (selectedSubjectId === \"null\") {\n      console.log(\"se elimino la materia\");\n      const url = new URL('http://localhost:8000/api/subjectpermodule/');\n      url.searchParams.append('course_id', courseId);\n      url.searchParams.append('module_id', moduleId);\n      fetch(url, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Token ${localStorage.getItem('token')}`,\n          'School-ID': sessionStorage.getItem('actual_school')\n        }\n      }).then(response => response.json()).then(data => {\n        console.log('Data actualizada: ', data);\n        console.log('aaaaaaaaaaaaaaaaaca', courseId, moduleId);\n        //AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACA FILTRAR LA MAT ELIMINADA Y MANDAR LO DEMAS\n        console.log(materias);\n        console.log(\"Maaaaaaaaaaaaaaaaterias\", materias.filter(materia => !(materia.course_id === courseId && materia.module_id === moduleId)));\n        setMaterias(materiaAnt => materiaAnt.filter(materia => !(materia.course_id === courseId && materia.module_id === moduleId)));\n      }).catch(error => {\n        console.error('Error fetching schedule data:', error);\n      });\n    } else {\n      fetch(`http://localhost:8000/api/subjectpermodule/`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Token ${localStorage.getItem('token')}`,\n          'School-ID': sessionStorage.getItem('actual_school')\n        },\n        body: JSON.stringify({\n          \"schedules\": [{\n            subject_id: selectedSubjectId,\n            course_id: courseId,\n            module_id: moduleId\n          }]\n        })\n      }).then(response => response.json()).then(data => {\n        console.log('Data actualizada: ', data);\n        setMaterias(materiaAnt => [data, ...materiaAnt]);\n      }).catch(error => {\n        console.error('Error fetching schedule data:', error);\n      });\n    }\n  }, []);\n  useEffect(() => {\n    if (sessionStorage.getItem('rol') === \"Profesor\") {\n      window.location.reload();\n    }\n  }, []);\n  useEffect(() => {\n    fetch('http://localhost:8000/api/modules/', {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Token ${localStorage.getItem('token')}`,\n        'School-ID': sessionStorage.getItem('actual_school')\n      }\n    }).then(response => response.json()).then(data => {\n      setModulesData(Object.values(data));\n    });\n  }, []);\n  useEffect(() => {\n    fetch('http://127.0.0.1:8000/api/courses/', {\n      method: \"GET\",\n      headers: {\n        'Authorization': 'Token ' + localStorage.getItem('token'),\n        'School-ID': sessionStorage.getItem('actual_school')\n      }\n    }).then(response => {\n      if (!response.ok) {\n        throw new Error('Network response was not ok');\n      }\n      return response.json();\n    }).then(data => {\n      console.log(\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\", CursosMostrar);\n      console.log(data);\n      if (CursosMostrar) {\n        data = data.filter(curso => CursosMostrar.includes(curso.id));\n      }\n      const courses = data.map(curs => ({\n        value: curs.id,\n        label: curs.name\n      }));\n      setCoursesDinamic(courses);\n    }).catch(error => console.error('Error fetching data:', error));\n  }, [CursosMostrar]);\n\n  /* const handleMenuClick = useCallback((e, key,courseId) => {\n       console.log(e)\n       console.log(key)\n       console.log(courseId)\n       console.log(\"se añadio la materia\")\n       //La key sera el id de la materia y puedo llegar a sacar el id del curso y de ahi saco el id del curso y ya tengo la que nceesito y hago el fetch\n       setSelectedItems(prevState => ({\n           ...prevState,\n           [key]: e.key\n       }));\n   }, []);*/\n\n  const makeColorTransparent = useCallback((color, alpha) => {\n    alpha = Math.max(0, Math.min(1, alpha));\n    const hexToRgba = hex => {\n      let r = 0,\n        g = 0,\n        b = 0;\n      if (hex.length === 4) {\n        r = parseInt(hex[1] + hex[1], 16);\n        g = parseInt(hex[2] + hex[2], 16);\n        b = parseInt(hex[3] + hex[3], 16);\n      } else if (hex.length === 7) {\n        r = parseInt(hex[1] + hex[2], 16);\n        g = parseInt(hex[3] + hex[4], 16);\n        b = parseInt(hex[5] + hex[6], 16);\n      }\n      return `rgba(${r},${g},${b},${alpha})`;\n    };\n    if (/^#[0-9A-Fa-f]{3,6}$/.test(color)) {\n      return hexToRgba(color);\n    } else {\n      return color;\n    }\n  }, []);\n  const getCellKey = useCallback((dayIndex, hourIndex, courseIndex) => {\n    return `${dayIndex}-${hourIndex}-${courseIndex}`;\n  }, []);\n  const memoizedDays = useMemo(() => days, []);\n  console.log(materias);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Calendario\",\n      style: {\n        margin: 'auto'\n      },\n      children: /*#__PURE__*/_jsxDEV(Row, {\n        wrap: false,\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          className: \"columna\",\n          children: [/*#__PURE__*/_jsxDEV(Row, {\n            className: \"esquina\",\n            style: {\n              width: '200px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Row, {\n              className: \"casilla esquina\",\n              children: \"D\\xEDa\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Row, {\n              className: \"casilla esquina\",\n              children: \"Hora\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 25\n          }, this), memoizedDays.map(day => {\n            const moduleData = modulesData.filter(data => data.day.toLowerCase() === day.toLowerCase());\n            return /*#__PURE__*/_jsxDEV(Row, {\n              children: [/*#__PURE__*/_jsxDEV(Col, {\n                className: \"casilla columna\",\n                children: day\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 249,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(Col, {\n                children: moduleData.map(module => /*#__PURE__*/_jsxDEV(Row, {\n                  className: \"casilla columna\",\n                  children: module.moduleNumber\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 252,\n                  columnNumber: 45\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 250,\n                columnNumber: 37\n              }, this)]\n            }, day, true, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 33\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          wrap: false,\n          children: coursesDinamic.map((course, courseIndex) => /*#__PURE__*/_jsxDEV(Col, {\n            children: [/*#__PURE__*/_jsxDEV(Row, {\n              className: \"casilla encabezado\",\n              children: course.label\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 33\n            }, this), memoizedDays.map((day, dayIndex) => {\n              const moduleData = modulesData.filter(data => data.day.toLowerCase() === day.toLowerCase());\n              return /*#__PURE__*/_jsxDEV(React.Fragment, {\n                children: moduleData.map((module, hourIndex) => {\n                  const key = getCellKey(dayIndex, hourIndex, courseIndex);\n\n                  // Buscar la materia que coincida con el día, módulo y curso\n                  const matchingMateria = materias.find(materia => materia.day.toLowerCase() === day.toLowerCase() && materia.moduleNumber === parseInt(module.moduleNumber) && materia.course_id === course.value);\n\n                  // Definir el sujeto basado en la materia coincidente\n                  const displaySubject = matchingMateria ? {\n                    value: matchingMateria.subject_name,\n                    abreviation: matchingMateria.subject_abreviation,\n                    color: matchingMateria.subject_color || 'white',\n                    avatar: matchingMateria.profile_picture ? /*#__PURE__*/_jsxDEV(Avatar, {\n                      size: 'small',\n                      src: matchingMateria.profile_picture\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 288,\n                      columnNumber: 63\n                    }, this) : /*#__PURE__*/_jsxDEV(Avatar, {\n                      size: 'small',\n                      icon: /*#__PURE__*/_jsxDEV(UserOutlined, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 289,\n                        columnNumber: 92\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 289,\n                      columnNumber: 63\n                    }, this),\n                    teacher: matchingMateria.nombre,\n                    teacher_id: matchingMateria.teacher_id\n                  } : null;\n                  return /*#__PURE__*/_jsxDEV(Col, {\n                    children: mibooleano ? /*#__PURE__*/_jsxDEV(Dropdown, {\n                      overlay: menu || /*#__PURE__*/_jsxDEV(Menu, {\n                        children: /*#__PURE__*/_jsxDEV(Menu.Item, {\n                          disabled: true,\n                          children: \"Cargando...\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 300,\n                          columnNumber: 84\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 300,\n                        columnNumber: 78\n                      }, this) // Menú por defecto mientras se carga\n                      ,\n                      trigger: ['click'],\n                      onVisibleChange: visible => {\n                        if (visible) {\n                          handleDropdownClick(module.id, course.value, key, matchingMateria);\n                        }\n                      },\n                      children: /*#__PURE__*/_jsxDEV(\"a\", {\n                        className: \"espacio\",\n                        style: {\n                          color: displaySubject ? displaySubject.color : \"\",\n                          backgroundColor: makeColorTransparent(displaySubject ? displaySubject.color : \"white\", 0.1)\n                        },\n                        children: /*#__PURE__*/_jsxDEV(\"div\", {\n                          style: {\n                            display: 'flex',\n                            alignItems: 'center',\n                            gap: 5\n                          },\n                          children: [displaySubject ? displaySubject.avatar : \"\", displaySubject ? displaySubject.abreviation : \"\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 312,\n                          columnNumber: 65\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 308,\n                        columnNumber: 61\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 299,\n                      columnNumber: 61\n                    }, this) : /*#__PURE__*/_jsxDEV(Tooltip, {\n                      arrow: false,\n                      trigger: 'click',\n                      title: displaySubject ? /*#__PURE__*/_jsxDEV(\"div\", {\n                        style: {\n                          color: '#8e96a',\n                          display: 'flex',\n                          flexDirection: 'column',\n                          gap: '8px'\n                        },\n                        children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                          style: {\n                            color: '#444'\n                          },\n                          children: displaySubject.value\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 324,\n                          columnNumber: 73\n                        }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n                          style: {\n                            color: '#444'\n                          },\n                          children: displaySubject.teacher\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 325,\n                          columnNumber: 73\n                        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                          style: {\n                            color: '#444',\n                            marginBlock: 5\n                          },\n                          children: [\" \", `${day} ${module.moduleNumber} módulo, ${course.label}`]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 326,\n                          columnNumber: 73\n                        }, this), !(tempSelectedKeys !== null && tempSelectedKeys !== void 0 && tempSelectedKeys.includes(displaySubject.teacher_id)) ? /*#__PURE__*/_jsxDEV(\"a\", {\n                          onClick: () => setTempSelectedKeys(tempSelectedKeys ? [...tempSelectedKeys, displaySubject.teacher_id] : [displaySubject.teacher_id]),\n                          style: {\n                            color: '#227cae',\n                            textDecoration: 'none'\n                          },\n                          children: [/*#__PURE__*/_jsxDEV(FilterOutlined, {}, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 332,\n                            columnNumber: 77\n                          }, this), \" Filtrar por este profesor\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 328,\n                          columnNumber: 73\n                        }, this) : null]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 323,\n                        columnNumber: 69\n                      }, this) : \"\",\n                      color: \"#ffffff\",\n                      overlayClassName: \"calendar-tooltip\",\n                      children: /*#__PURE__*/_jsxDEV(\"a\", {\n                        className: \"espacio\",\n                        style: {\n                          color: displaySubject ? displaySubject.color : \"\",\n                          backgroundColor: makeColorTransparent(displaySubject ? displaySubject.color : \"white\", 0.1)\n                        },\n                        children: /*#__PURE__*/_jsxDEV(\"div\", {\n                          style: {\n                            display: 'flex',\n                            alignItems: 'center',\n                            gap: 5\n                          },\n                          children: [displaySubject ? displaySubject.avatar : \"\", displaySubject ? displaySubject.abreviation : \"\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 344,\n                          columnNumber: 69\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 340,\n                        columnNumber: 65\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 319,\n                      columnNumber: 61\n                    }, this)\n                  }, key, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 297,\n                    columnNumber: 53\n                  }, this);\n                })\n              }, dayIndex, false, {\n                fileName: _jsxFileName,\n                lineNumber: 269,\n                columnNumber: 41\n              }, this);\n            })]\n          }, courseIndex, true, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 29\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n}\n_s(Calendario, \"zOgPHplv7awRp3jHoX9A7D90UUI=\");\n_c = Calendario;\nvar _c;\n$RefreshReg$(_c, \"Calendario\");","map":{"version":3,"names":["React","useState","useCallback","useMemo","useEffect","Row","Col","Dropdown","Menu","Avatar","Tooltip","Button","UserOutlined","FilterOutlined","jsxDEV","_jsxDEV","Fragment","_Fragment","days","Calendario","tempSelectedKeys","setTempSelectedKeys","materias","mibooleano","setMaterias","setTeacher","CursosMostrar","_s","console","log","selectedItems","setSelectedItems","coursesDinamic","setCoursesDinamic","modulesData","setModulesData","mostrarAceptar","setMostrarAceptar","incomplete","setIncomplete","menu","setMenu","handleDropdownClick","moduleId","courseId","key","matchingMateria","url","URL","params","module_id","course_id","Object","keys","forEach","paramKey","searchParams","append","fetch","method","headers","localStorage","getItem","sessionStorage","then","response","json","data","filter","subject","id","subject_id","Array","isArray","length","generatedMenu","onClick","e","handleMenuClick","children","Item","value","style","color","fileName","_jsxFileName","lineNumber","columnNumber","map","name","disabled","catch","error","selectedSubjectId","materia","materiaAnt","body","JSON","stringify","window","location","reload","values","ok","Error","curso","includes","courses","curs","label","makeColorTransparent","alpha","Math","max","min","hexToRgba","hex","r","g","b","parseInt","test","getCellKey","dayIndex","hourIndex","courseIndex","memoizedDays","className","margin","wrap","width","day","moduleData","toLowerCase","module","moduleNumber","course","find","displaySubject","subject_name","abreviation","subject_abreviation","subject_color","avatar","profile_picture","size","src","icon","teacher","nombre","teacher_id","overlay","trigger","onVisibleChange","visible","backgroundColor","display","alignItems","gap","arrow","title","flexDirection","marginBlock","textDecoration","overlayClassName","_c","$RefreshReg$"],"sources":["/home/augusto/Escritorio/KRONOS-FRONTEND/Front/react_kronos/src/components/calendario/CalendarioDirectivo.jsx"],"sourcesContent":["import React, { useState, useCallback, useMemo, useEffect } from 'react';\nimport { Row, Col, Dropdown, Menu, Avatar, Tooltip, Button } from 'antd';\nimport { UserOutlined, FilterOutlined } from '@ant-design/icons';\nimport './Calendario.scss';\n\n\nconst days = ['Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes'];\n\n\n\nexport default function Calendario({ tempSelectedKeys,setTempSelectedKeys,materias, mibooleano, setMaterias,setTeacher,CursosMostrar }) {\n    console.log(\"CursosMostrar\",CursosMostrar)\n    const [selectedItems, setSelectedItems] = useState({});\n    const [coursesDinamic, setCoursesDinamic] = useState([]);\n    const [modulesData, setModulesData] = useState([]);\n    const [mostrarAceptar, setMostrarAceptar] = useState(false);\n    const [incomplete, setIncomplete] = useState([]);\n    const [menu, setMenu] = useState(null); // Estado para guardar el menú\n\n    // Función para crear el menú dinámicamente al hacer clic\n    const handleDropdownClick = (moduleId, courseId, key,matchingMateria) => {\n        setMenu(null); // Resetea el menú\n        const url = new URL('http://localhost:8000/api/subjectpermodule/');\n        const params = { module_id: moduleId, course_id: courseId };\n        Object.keys(params).forEach(paramKey => url.searchParams.append(paramKey, params[paramKey]));\n\n        fetch(url, {\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Token ${localStorage.getItem('token')}`,\n                'School-ID': sessionStorage.getItem('actual_school'),\n            },\n        })\n        .then((response) => response.json())\n        .then((data) => {\n            if(matchingMateria&&data){\n                data = data.filter((subject) => subject.id !== matchingMateria.subject_id);\n            }\n            if (data && Array.isArray(data) && data.length > 0) {\n                const generatedMenu = (\n                    <Menu onClick={(e) => handleMenuClick(moduleId, courseId, e)}>\n                         {matchingMateria && (\n                            <Menu.Item key=\"null\" value=\"null\" style={{ color: 'red' }}>\n                                Eliminar\n                            </Menu.Item>\n                        )}\n                        {data.map((subject) => (\n                            <Menu.Item key={subject.id} value={subject.id}>\n                                {subject.name}\n                            </Menu.Item>\n                        ))}\n                    </Menu>\n                );\n                setMenu(generatedMenu);\n            } else {\n                setMenu(\n                    <Menu onClick={(e) => handleMenuClick(moduleId, courseId, e)}>\n                         {matchingMateria && (\n                            <Menu.Item key=\"null\" value=\"null\" style={{ color: 'red' }}>\n                                Eliminar\n                            </Menu.Item>\n                        )}\n                        <Menu.Item disabled key=\"no-data\">No hay materias disponibles</Menu.Item>\n                    </Menu>\n                );\n            }\n        })\n        .catch(error => {\n            setMenu(\n                <Menu>\n                    <Menu.Item disabled key=\"error\">Error al traer las materias</Menu.Item>\n                </Menu>\n            );\n        });\n    };\n\n    const handleMenuClick = useCallback((moduleId, courseId, e) => {\n        const selectedSubjectId = e.key;\n        console.log(selectedSubjectId)\n        if(selectedSubjectId === \"null\"){\n            console.log(\"se elimino la materia\")\n            const url = new URL('http://localhost:8000/api/subjectpermodule/');\n            url.searchParams.append('course_id', courseId);\n            url.searchParams.append('module_id', moduleId);\n\n            fetch(url, {\n                method: 'DELETE',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Token ${localStorage.getItem('token')}`,\n                    'School-ID': sessionStorage.getItem('actual_school'),\n                },\n            })\n            .then((response) => response.json())\n            .then((data) => {\n                console.log('Data actualizada: ', data);\n                console.log('aaaaaaaaaaaaaaaaaca', courseId, moduleId)\n                //AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACA FILTRAR LA MAT ELIMINADA Y MANDAR LO DEMAS\n                console.log(materias)\n                console.log(\n                    \"Maaaaaaaaaaaaaaaaterias\",\n                    materias.filter((materia) => !(materia.course_id === courseId && materia.module_id === moduleId))\n                  );\n                setMaterias((materiaAnt)=>materiaAnt.filter((materia) => !(materia.course_id === courseId && materia.module_id === moduleId)));\n            })\n            .catch(error => {\n                console.error('Error fetching schedule data:', error);\n            });\n        }else{\n            fetch(`http://localhost:8000/api/subjectpermodule/`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Token ${localStorage.getItem('token')}`,\n                    'School-ID': sessionStorage.getItem('actual_school'),\n                },\n                body: JSON.stringify({\n                    \"schedules\":[{\n                        subject_id: selectedSubjectId,\n                        course_id: courseId,\n                        module_id: moduleId\n                    }]\n                }),\n            })\n            .then((response) => response.json())\n            .then((data) => {\n                console.log('Data actualizada: ', data);\n                setMaterias((materiaAnt)=>[data,...materiaAnt]);\n            })\n            .catch(error => {\n                console.error('Error fetching schedule data:', error);\n            });\n        }\n    }, []);\n    \n    \n\n    useEffect(() => {\n        if(sessionStorage.getItem('rol') === \"Profesor\"){\n            window.location.reload();\n        }\n    }, []);\n\n\n    useEffect(() => {\n        fetch('http://localhost:8000/api/modules/', {\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Token ${localStorage.getItem('token')}`,\n                'School-ID': sessionStorage.getItem('actual_school'),\n            },\n        })\n            .then((response) => response.json())\n            .then((data) => {\n                setModulesData(Object.values(data));\n            });\n    }, []);\n\n    useEffect(() => {\n        fetch('http://127.0.0.1:8000/api/courses/', {\n            method: \"GET\",\n            headers: {\n                'Authorization': 'Token ' + localStorage.getItem('token'),\n                'School-ID': sessionStorage.getItem('actual_school'),\n            },\n        })\n            .then(response => {\n                if (!response.ok) {\n                    throw new Error('Network response was not ok');\n                }\n                return response.json();\n            })\n            .then(data => {\n                console.log(\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",CursosMostrar)\n                console.log(data)\n                if(CursosMostrar){\n                    data = data.filter((curso) => CursosMostrar.includes(curso.id));\n                }\n                const courses = data.map(curs => ({\n                    value: curs.id,\n                    label: curs.name,\n                }));\n                setCoursesDinamic(courses);\n            })\n            .catch(error => console.error('Error fetching data:', error));\n    }, [CursosMostrar]);\n\n   /* const handleMenuClick = useCallback((e, key,courseId) => {\n        console.log(e)\n        console.log(key)\n        console.log(courseId)\n        console.log(\"se añadio la materia\")\n        //La key sera el id de la materia y puedo llegar a sacar el id del curso y de ahi saco el id del curso y ya tengo la que nceesito y hago el fetch\n        setSelectedItems(prevState => ({\n            ...prevState,\n            [key]: e.key\n        }));\n    }, []);*/\n\n    const makeColorTransparent = useCallback((color, alpha) => {\n        alpha = Math.max(0, Math.min(1, alpha));\n        const hexToRgba = (hex) => {\n            let r = 0, g = 0, b = 0;\n            if (hex.length === 4) {\n                r = parseInt(hex[1] + hex[1], 16);\n                g = parseInt(hex[2] + hex[2], 16);\n                b = parseInt(hex[3] + hex[3], 16);\n            } else if (hex.length === 7) {\n                r = parseInt(hex[1] + hex[2], 16);\n                g = parseInt(hex[3] + hex[4], 16);\n                b = parseInt(hex[5] + hex[6], 16);\n            }\n            return `rgba(${r},${g},${b},${alpha})`;\n        };\n\n        if (/^#[0-9A-Fa-f]{3,6}$/.test(color)) {\n            return hexToRgba(color);\n        } else {\n            return color;\n        }\n    }, []);\n\n    const getCellKey = useCallback((dayIndex, hourIndex, courseIndex) => {\n        return `${dayIndex}-${hourIndex}-${courseIndex}`;\n    }, []);\n\n\n    const memoizedDays = useMemo(() => days, []);\n    console.log(materias)\n    return (\n        <>\n            <div className=\"Calendario\" style={{ margin: 'auto' }}>\n                {/* Fila que envuelve el contenido del calendario */}\n                <Row wrap={false}>\n                    {/* Columna para los días */}\n                    <Col className=\"columna\">\n                        <Row className='esquina' style={{ width: '200px' }}>\n                            <Row className='casilla esquina'>Día</Row>\n                            <Row className='casilla esquina'>Hora</Row>\n                        </Row>\n                        {memoizedDays.map((day) => {\n                            const moduleData = modulesData.filter(\n                                (data) => data.day.toLowerCase() === day.toLowerCase()\n                            );\n                            return (\n                                <Row key={day} >\n                                    <Col className='casilla columna'>{day}</Col>\n                                    <Col>\n                                        {moduleData.map((module) => (\n                                            <Row className='casilla columna'>{module.moduleNumber}</Row>\n                                        ))}\n                                    </Col>\n                                </Row>\n                            )\n                        })}\n                    </Col>\n\n                    <Row wrap={false}>\n                        {coursesDinamic.map((course, courseIndex) => (\n                            <Col key={courseIndex}>\n                                <Row className='casilla encabezado'>{course.label}</Row>\n                                {memoizedDays.map((day, dayIndex) => {\n                                    const moduleData = modulesData.filter(\n                                        (data) => data.day.toLowerCase() === day.toLowerCase()\n                                    );\n                                    return (\n                                        <React.Fragment key={dayIndex}>\n                                            {moduleData.map((module, hourIndex) => {\n                                                const key = getCellKey(dayIndex, hourIndex, courseIndex);\n\n                                                // Buscar la materia que coincida con el día, módulo y curso\n                                                const matchingMateria = materias.find(materia =>\n                                                    materia.day.toLowerCase() === day.toLowerCase() &&\n                                                    materia.moduleNumber === parseInt(module.moduleNumber) &&\n                                                    materia.course_id === course.value\n                                                );\n                                                \n                                                \n                                                // Definir el sujeto basado en la materia coincidente\n                                                const displaySubject = matchingMateria ? {\n                                                    value: matchingMateria.subject_name,\n                                                    abreviation: matchingMateria.subject_abreviation,\n                                                    color: matchingMateria.subject_color || 'white',\n                                                    avatar: (\n                                                        matchingMateria.profile_picture \n                                                            ? <Avatar size={'small'} src={matchingMateria.profile_picture} /> \n                                                            : <Avatar size={'small'} icon={<UserOutlined />} />\n                                                    ),\n                                                    teacher: matchingMateria.nombre,\n                                                    teacher_id:matchingMateria.teacher_id,\n                                                } : null;\n                                                \n\n                                                return (\n                                                    <Col key={key}>\n                                                        {mibooleano ? (\n                                                            <Dropdown\n                                                            overlay={menu || <Menu><Menu.Item disabled>Cargando...</Menu.Item></Menu>} // Menú por defecto mientras se carga\n                                                            trigger={['click']}\n                                                            onVisibleChange={(visible) => {\n                                                                if (visible) {\n                                                                    handleDropdownClick(module.id, course.value, key,matchingMateria);\n                                                                }\n                                                            }}\n                                                        >\n                                                            <a className='espacio' style={{\n                                                                color: displaySubject ? displaySubject.color : \"\",\n                                                                backgroundColor: makeColorTransparent(displaySubject ? displaySubject.color : \"white\", 0.1),\n                                                            }}>\n                                                                <div style={{ display: 'flex', alignItems: 'center', gap: 5 }}>\n                                                                    {displaySubject ? displaySubject.avatar : \"\"}\n                                                                    {displaySubject ? displaySubject.abreviation : \"\"}\n                                                                </div>\n                                                            </a>\n                                                        </Dropdown>                                                        \n                                                        ) : (\n                                                            <Tooltip\n                                                                arrow={false}\n                                                                trigger={'click'}\n                                                                title={displaySubject ? (\n                                                                    <div style={{ color: '#8e96a', display: 'flex', flexDirection: 'column', gap: '8px' }}>\n                                                                        <b style={{ color: '#444' }}>{displaySubject.value}</b>\n                                                                        <b style={{ color: '#444' }}>{displaySubject.teacher}</b>\n                                                                        <p style={{ color: '#444', marginBlock: 5 }}> {`${day} ${module.moduleNumber} módulo, ${course.label}`}</p>\n                                                                        {!tempSelectedKeys?.includes(displaySubject.teacher_id) ? \n                                                                        <a \n                                                                            onClick={() => setTempSelectedKeys(tempSelectedKeys ? [...tempSelectedKeys, displaySubject.teacher_id] : [displaySubject.teacher_id])} \n                                                                            style={{ color: '#227cae', textDecoration: 'none' }}>\n                                                                                \n                                                                            <FilterOutlined /> Filtrar por este profesor\n                                                                        </a>\n                                                                        : null}\n                                                                    </div>\n                                                                ) : \"\"}\n                                                                color='#ffffff'\n                                                                overlayClassName='calendar-tooltip'\n                                                            >\n                                                                <a className='espacio' style={{\n                                                                    color: displaySubject ? displaySubject.color : \"\",\n                                                                    backgroundColor: makeColorTransparent(displaySubject ? displaySubject.color : \"white\", 0.1),\n                                                                }}>\n                                                                    <div style={{ display: 'flex', alignItems: 'center', gap: 5 }}>\n                                                                        {displaySubject ? displaySubject.avatar : \"\"}\n                                                                        {displaySubject ? displaySubject.abreviation : \"\"}\n                                                                    </div>\n                                                                </a>\n                                                            </Tooltip>\n                                                        )}\n                                                    </Col>\n                                                );\n                                            })}\n                                        </React.Fragment>\n                                    );\n                                })}\n                            </Col>\n                        ))}\n                    </Row>\n\n                </Row>\n            </div>\n            \n        </>\n    );\n\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}