{"ast":null,"code":"var _jsxFileName = \"/home/augusto/Escritorio/KRONOS-FRONTEND/Front/react_kronos/src/pages/materias/ModalAsignacion.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { Modal, Select, Button, List } from 'antd';\nimport { CloseOutlined } from '@ant-design/icons';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ModalComponent = ({\n  isModalOpen,\n  setIsModalOpen,\n  record,\n  parentRecord,\n  teachers,\n  setSelectedTeacher,\n  asignarMateria\n}) => {\n  _s();\n  const [selectedTeacherModal, setSelectedTeacherModal] = useState(null);\n  const [confirmModalOpen, setConfirmModalOpen] = useState(false);\n  const [teacherToRemove, setTeacherToRemove] = useState(null);\n  const assignedTeachers = record.teacher_subject_schools || [];\n  const filteredTeachers = teachers.filter(teacher => !assignedTeachers.some(at => at.teacher_id === teacher.value));\n  const showConfirmModal = value => {\n    setTeacherToRemove(value);\n    setConfirmModalOpen(true);\n  };\n  const removeTeacher = () => {\n    if (teacherToRemove) {\n      fetch('http://127.0.0.1:8000/api/teachersubjectschool/' + teacherToRemove + '/', {\n        method: 'DELETE',\n        headers: {\n          'Authorization': 'Token ' + localStorage.getItem('token'),\n          'School-ID': sessionStorage.getItem('actual_school'),\n          'Content-Type': 'application/json'\n        }\n      }).then(() => {\n        setConfirmModalOpen(false);\n        setTeacherToRemove(null);\n        setIsModalOpen(false); // Cierra el modal principal si es necesario\n      }).catch(error => {\n        console.error('Error removing teacher:', error);\n        setConfirmModalOpen(false);\n      });\n    }\n  };\n  const handleCancel = () => {\n    // Limpiar el valor del Select al cerrar el modal\n    setSelectedTeacherModal(null);\n    setIsModalOpen(false);\n  };\n  const setTeachers = value => {\n    setSelectedTeacherModal(value);\n    setSelectedTeacher(value);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Modal, {\n      width: 400,\n      title: \"Asigna profesor a la materia\",\n      open: isModalOpen,\n      onOk: () => {\n        asignarMateria(record.id);\n        setSelectedTeacherModal(null);\n      },\n      onCancel: handleCancel,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '20px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            margin: 0\n          },\n          children: [\"La materia \", /*#__PURE__*/_jsxDEV(\"b\", {\n            children: parentRecord.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 36\n          }, this), \" - \", /*#__PURE__*/_jsxDEV(\"b\", {\n            style: {\n              textTransform: 'uppercase'\n            },\n            children: parentRecord.abbreviation\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 65\n          }, this), \" del curso \", /*#__PURE__*/_jsxDEV(\"b\", {\n            children: record.course_name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 149\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 21\n        }, this), assignedTeachers.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: '10px',\n            marginBottom: '10px',\n            maxHeight: '150px',\n            overflowY: 'auto'\n          },\n          children: /*#__PURE__*/_jsxDEV(List, {\n            dataSource: assignedTeachers,\n            renderItem: item => /*#__PURE__*/_jsxDEV(List.Item, {\n              actions: [/*#__PURE__*/_jsxDEV(Button, {\n                icon: /*#__PURE__*/_jsxDEV(CloseOutlined, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 76,\n                  columnNumber: 55\n                }, this),\n                onClick: () => showConfirmModal(item.id)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 75,\n                columnNumber: 45\n              }, this)],\n              children: item.teacher_name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: '10px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n            style: {\n              margin: 0\n            },\n            children: \"Profesor :\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Select, {\n            size: \"large\",\n            style: {\n              width: '100%'\n            },\n            showSearch: true,\n            placeholder: \"Buscar profesor\",\n            options: filteredTeachers,\n            value: selectedTeacherModal,\n            onChange: value => setTeachers(value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: \"Confirmar eliminaci\\xF3n\",\n      visible: confirmModalOpen,\n      onOk: removeTeacher,\n      onCancel: () => setConfirmModalOpen(false),\n      okText: \"Eliminar\",\n      cancelText: \"Cancelar\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\xBFEst\\xE1s seguro de que quieres eliminar este profesor?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n_s(ModalComponent, \"KF3XyfBzaeO9KIwrg20wc7QanuM=\");\n_c = ModalComponent;\nexport default ModalComponent;\nvar _c;\n$RefreshReg$(_c, \"ModalComponent\");","map":{"version":3,"names":["React","useState","Modal","Select","Button","List","CloseOutlined","jsxDEV","_jsxDEV","Fragment","_Fragment","ModalComponent","isModalOpen","setIsModalOpen","record","parentRecord","teachers","setSelectedTeacher","asignarMateria","_s","selectedTeacherModal","setSelectedTeacherModal","confirmModalOpen","setConfirmModalOpen","teacherToRemove","setTeacherToRemove","assignedTeachers","teacher_subject_schools","filteredTeachers","filter","teacher","some","at","teacher_id","value","showConfirmModal","removeTeacher","fetch","method","headers","localStorage","getItem","sessionStorage","then","catch","error","console","handleCancel","setTeachers","children","width","title","open","onOk","id","onCancel","style","padding","margin","name","fileName","_jsxFileName","lineNumber","columnNumber","textTransform","abbreviation","course_name","length","marginTop","marginBottom","maxHeight","overflowY","dataSource","renderItem","item","Item","actions","icon","onClick","teacher_name","size","showSearch","placeholder","options","onChange","visible","okText","cancelText","_c","$RefreshReg$"],"sources":["/home/augusto/Escritorio/KRONOS-FRONTEND/Front/react_kronos/src/pages/materias/ModalAsignacion.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Modal, Select, Button, List } from 'antd';\nimport { CloseOutlined } from '@ant-design/icons';\n\nconst ModalComponent = ({ isModalOpen, setIsModalOpen, record, parentRecord, teachers, setSelectedTeacher, asignarMateria }) => {\n    const [selectedTeacherModal, setSelectedTeacherModal] = useState(null);\n    const [confirmModalOpen, setConfirmModalOpen] = useState(false);\n    const [teacherToRemove, setTeacherToRemove] = useState(null);\n\n    const assignedTeachers = record.teacher_subject_schools || [];\n    const filteredTeachers = teachers.filter(teacher => !assignedTeachers.some(at => at.teacher_id === teacher.value));\n\n    const showConfirmModal = (value) => {\n        setTeacherToRemove(value);\n        setConfirmModalOpen(true);\n    }\n\n    const removeTeacher = () => {\n        if (teacherToRemove) {\n            fetch('http://127.0.0.1:8000/api/teachersubjectschool/' + teacherToRemove + '/', {\n                method: 'DELETE',\n                headers: {\n                    'Authorization': 'Token ' + localStorage.getItem('token'),\n                    'School-ID': sessionStorage.getItem('actual_school'),\n                    'Content-Type': 'application/json'\n                },\n            })\n            .then(() => {\n                setConfirmModalOpen(false);\n                setTeacherToRemove(null);\n                setIsModalOpen(false); // Cierra el modal principal si es necesario\n            })\n            .catch(error => {\n                console.error('Error removing teacher:', error);\n                setConfirmModalOpen(false);\n            });\n        }\n    }\n\n    const handleCancel = () => {\n        // Limpiar el valor del Select al cerrar el modal\n        setSelectedTeacherModal(null);\n        setIsModalOpen(false);\n    };\n\n    const setTeachers = (value) => {\n        setSelectedTeacherModal(value);\n        setSelectedTeacher(value);\n    }\n\n    return (\n        <>\n            <Modal\n                width={400}\n                title=\"Asigna profesor a la materia\"\n                open={isModalOpen}\n                onOk={() => {\n                    asignarMateria(record.id);\n                    setSelectedTeacherModal(null); \n                }}\n                onCancel={handleCancel}\n            >\n                <div style={{ padding: '20px' }}>\n                    <p style={{ margin: 0 }}>\n                        La materia <b>{parentRecord.name}</b> - <b style={{ textTransform: 'uppercase' }}>{parentRecord.abbreviation}</b> del curso <b>{record.course_name}</b>\n                    </p>\n\n                    {assignedTeachers.length > 0 && (\n                        <div style={{ marginTop: '10px', marginBottom: '10px', maxHeight: '150px', overflowY: 'auto' }}>\n                            <List\n                                dataSource={assignedTeachers}\n                                renderItem={item => (\n                                    <List.Item\n                                        actions={[\n                                            <Button \n                                                icon={<CloseOutlined />} \n                                                onClick={() => showConfirmModal(item.id)}\n                                            />\n                                        ]}\n                                    >\n                                        {item.teacher_name}\n                                    </List.Item>\n                                )}\n                            />\n                        </div>\n                    )}\n\n                    {/* Select para asignar un nuevo profesor */}\n                    <div style={{ marginTop: '10px' }}>\n                        <h6 style={{ margin: 0 }}>Profesor :</h6>\n                        <Select\n                            size='large'\n                            style={{ width: '100%' }}\n                            showSearch\n                            placeholder=\"Buscar profesor\"\n                            options={filteredTeachers}\n                            value={selectedTeacherModal} \n                            onChange={value => setTeachers(value)} \n                        />\n                    </div>\n                </div>\n            </Modal>\n\n            <Modal\n                title=\"Confirmar eliminación\"\n                visible={confirmModalOpen}\n                onOk={removeTeacher}\n                onCancel={() => setConfirmModalOpen(false)}\n                okText=\"Eliminar\"\n                cancelText=\"Cancelar\"\n            >\n                <p>¿Estás seguro de que quieres eliminar este profesor?</p>\n            </Modal>\n        </>\n    );\n};\n\nexport default ModalComponent;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}